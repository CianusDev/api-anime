# Neko-Sama
Simple [Neko-Sama](https://neko-sama.fr) scrapper for everyone
## Getting started
`npm i @ibaraki-douji/neko-sama --save`

## Usage

### Import the lib
```js
const NekoSama = require('@ibaraki-douji/neko-sama')
```

### Search
```js
const NekoSama = require('@ibaraki-douji/neko-sama')

NekoSama.search("sao").then(console.log)
NekoSama.search("sao", "VOSTFR").then(console.log)
NekoSama.search("sao", "VF").then(console.log)
```
First parameter is the query\
Second parameter is the language of the video (Optionnal : default = `VOSTFR`)\
Return type : `Promise<Array<Anime>>`

### Get All Anime information
```js
const NekoSama = require('@ibaraki-douji/neko-sama')

NekoSama.search("sao").then(anime => {
    anime.fetchAllInformations().then(() => {
        console.log(anime)
    })
})
```
You will have the anime + episodes infos (you will not have the sream data yet)
Return type : `void`

### Get Episode stream data
```js
const NekoSama = require('@ibaraki-douji/neko-sama')

NekoSama.search("sao").then(animes => {
    const anime = animes[0];
    anime.fetchAllInformations().then(() => {
        const firstEp = anime.episodes[0]
        firstEp.fetchStreamData().then(() => {
            console.log(firstEp.stream)
        })
    })
})
```
Return type : `void`

### Download episode
```js
const NekoSama = require('@ibaraki-douji/neko-sama')

NekoSama.search("sao").then(animes => {
    const anime = animes[0];
    anime.fetchAllInformations().then(() => {
        const firstEp = anime.episodes[0]
        firstEp.fetchStreamData().then(() => {
            NekoSama.download(firstEp.stream, 1080, "./sao1.mp4", (data) => {
                console.log(data);
            }).then(() => {
                console.log("Ended")
            })
        })
    })
})
```
First parameter is the `StreamData`\
Second parameter is the quality (1080, 720, 480)\
Third parameter is the path of the downloaded video\
Fourth parameter is the current state of the download (refresh every 0.5s)\
Return type `void`

## Exemple
```js
const YouTube = require('@ibaraki-douji/youtube').YouTube

// MAKE A ASYNC FUNCTION AT START (it's just easier to read with await)
(async () => {
    // get the rearch result for sao
    const search = await YouTube.search("sao");
    
    // get the season you want
    const anime = search[3];
    
    // fetch all the data of the anime
    await anime.fetchAllInformations();
    
    //get the first episode
    const episode = anime.episodes[0];
    
    //fetch the stream data of the episode
    await episode.fetchStreamData();
    
    //download the episode in 1080p, and store it in the same folder
    await NekoSama.download(episode.Stream, 1080, "./SAO-S1-E01.mp4", (data) => {
        console.log(data.current + " / " + data.duration + " | " + data.speed + "x");
    })
})()
```

## More Help and Support
Discord : https://discord.gg/mD9c4zP4Er
#
Ask me what you want  in the Discord server